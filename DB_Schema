# NOCTAEL E-COMMERCE DATABASE HIERARCHY

## ğŸ“Š DATABASE STRUCTURE OVERVIEW

\`\`\`
NOCTAEL_ECOMMERCE_DB
â”‚
â”œâ”€â”€ ğŸ‘¥ USER MANAGEMENT
â”‚   â”œâ”€â”€ users (Core user data)
â”‚   â”œâ”€â”€ user_sessions (Authentication sessions)
â”‚   â”œâ”€â”€ password_reset_tokens (Password recovery)
â”‚   â””â”€â”€ email_verification_tokens (Email verification)
â”‚
â”œâ”€â”€ ğŸ›ï¸ PRODUCT CATALOG
â”‚   â”œâ”€â”€ categories (Product categories - hierarchical)
â”‚   â”œâ”€â”€ brands (Product brands)
â”‚   â”œâ”€â”€ products (Main product information)
â”‚   â”œâ”€â”€ product_images (Product photos)
â”‚   â”œâ”€â”€ product_variants (Size, color variations)
â”‚   â”œâ”€â”€ variant_options (Variant attributes)
â”‚   â”œâ”€â”€ product_tags (Product tags)
â”‚   â””â”€â”€ product_tag_relations (Many-to-many: products â†” tags)
â”‚
â”œâ”€â”€ ğŸ“¦ INVENTORY MANAGEMENT
â”‚   â””â”€â”€ inventory_transactions (Stock movement tracking)
â”‚
â”œâ”€â”€ ğŸ‘¤ CUSTOMER DATA
â”‚   â”œâ”€â”€ addresses (Shipping/billing addresses)
â”‚   â”œâ”€â”€ wishlists (Customer wishlists)
â”‚   â””â”€â”€ wishlist_items (Items in wishlists)
â”‚
â”œâ”€â”€ ğŸ›’ SHOPPING CART
â”‚   â”œâ”€â”€ carts (Shopping cart sessions)
â”‚   â””â”€â”€ cart_items (Items in cart)
â”‚
â”œâ”€â”€ ğŸ“‹ ORDER MANAGEMENT
â”‚   â”œâ”€â”€ orders (Order information)
â”‚   â”œâ”€â”€ order_items (Products in orders)
â”‚   â””â”€â”€ order_status_history (Order status tracking)
â”‚
â”œâ”€â”€ ğŸ’³ PAYMENT PROCESSING
â”‚   â”œâ”€â”€ payment_methods (Available payment options)
â”‚   â””â”€â”€ payment_transactions (Payment records)
â”‚
â”œâ”€â”€ ğŸšš SHIPPING & FULFILLMENT
â”‚   â”œâ”€â”€ shipping_methods (Shipping options)
â”‚   â”œâ”€â”€ shipments (Shipment tracking)
â”‚   â””â”€â”€ shipment_items (Items in shipments)
â”‚
â”œâ”€â”€ ğŸ« DISCOUNTS & PROMOTIONS
â”‚   â”œâ”€â”€ discount_codes (Coupons/promo codes)
â”‚   â””â”€â”€ discount_code_usage (Usage tracking)
â”‚
â”œâ”€â”€ â­ REVIEWS & RATINGS
â”‚   â”œâ”€â”€ product_reviews (Customer reviews)
â”‚   â””â”€â”€ review_votes (Review helpfulness votes)
â”‚
â”œâ”€â”€ ğŸ”” NOTIFICATIONS
â”‚   â”œâ”€â”€ notification_templates (Email/SMS templates)
â”‚   â””â”€â”€ user_notifications (User notification queue)
â”‚
â”œâ”€â”€ ğŸ“ˆ ANALYTICS & TRACKING
â”‚   â”œâ”€â”€ page_views (Website analytics)
â”‚   â”œâ”€â”€ product_views (Product view tracking)
â”‚   â””â”€â”€ search_queries (Search analytics)
â”‚
â””â”€â”€ âš™ï¸ SYSTEM MANAGEMENT
    â”œâ”€â”€ system_settings (Application configuration)
    â””â”€â”€ activity_logs (System activity tracking)
\`\`\`

## ğŸ”— KEY RELATIONSHIPS

### Primary Relationships:
- **users** â†’ orders (1:many)
- **users** â†’ carts (1:many)
- **users** â†’ addresses (1:many)
- **users** â†’ wishlists (1:many)
- **users** â†’ product_reviews (1:many)

### Product Relationships:
- **categories** â†’ products (1:many)
- **brands** â†’ products (1:many)
- **products** â†’ product_images (1:many)
- **products** â†’ product_variants (1:many)
- **products** â†’ cart_items (1:many)
- **products** â†’ order_items (1:many)

### Order Flow:
- **carts** â†’ orders (conversion)
- **orders** â†’ order_items (1:many)
- **orders** â†’ payment_transactions (1:many)
- **orders** â†’ shipments (1:many)

## ğŸ“‹ TABLE DETAILS

### Core Tables (High Priority):
1. **users** - 15 fields, authentication & profile
2. **products** - 25+ fields, complete product data
3. **orders** - 40+ fields, comprehensive order info
4. **categories** - Hierarchical structure with parent_id

### Supporting Tables:
- **product_variants** - Handle size/color variations
- **inventory_transactions** - Track all stock movements
- **payment_transactions** - Payment processing records
- **order_status_history** - Audit trail for orders

### Analytics Tables:
- **page_views** - Website traffic analysis
- **product_views** - Product popularity tracking
- **search_queries** - Search behavior analysis

## ğŸ” INDEXES & PERFORMANCE

### Critical Indexes:
- users(email) - Login performance
- products(sku, slug) - Product lookups
- orders(order_number, user_id) - Order queries
- product_reviews(product_id) - Review display

### Composite Indexes:
- orders(user_id, status) - User order filtering
- products(category_id, is_active) - Category browsing
- cart_items(cart_id, product_id) - Cart operations

## ğŸ›¡ï¸ DATA INTEGRITY

### Foreign Key Constraints:
- CASCADE deletes for dependent data
- RESTRICT deletes for referenced data
- SET NULL for optional references

### Data Validation:
- Email uniqueness constraints
- SKU uniqueness for products
- Rating bounds (1-5 stars)
- Enum constraints for status fields

## ğŸ“Š ESTIMATED DATA VOLUMES

### Production Scale:
- **users**: 10K-100K records
- **products**: 1K-10K records
- **orders**: 50K-500K records
- **page_views**: 1M+ records (archived regularly)

### Storage Considerations:
- Product images stored as URLs (external storage)
- Large text fields for descriptions
- JSON fields for flexible data storage
